{% extends "base.html" %}

{% block title %}Forecast Viewer{% endblock %}

{% block content %}
<div class="container">
   
    <div class="nyc-weather-dashboard">
        <div class="dashboard-header">
            <h2 id="dashboardTitle">Weather Dashboard</h2>
            
            <!-- Regular controls (for current weather) -->
            <div id="regularControls" class="dashboard-controls">
                <div class="location-selector" id="locationSelector" style="display: none;">
                    <select id="locationSelect" class="location-select">
                        <option value="nyc">New York City</option>
                    </select>
                </div>
                <button id="monthlyViewBtn" class="btn btn-secondary">Monthly History</button>
                <button id="refreshWeatherBtn" class="btn btn-secondary">Refresh</button>
            </div>
            
            <!-- History controls (hidden by default) -->
            <div id="historyControls" class="dashboard-controls history-controls" style="display: none;">
                <button id="prevMonthBtn" class="btn btn-secondary">← Previous</button>
                <button id="nextMonthBtn" class="btn btn-secondary">Next →</button>
                <button id="backToCurrentBtn" class="btn btn-primary">Back to Current</button>
            </div>
        </div>
        
        <div id="currentWeatherCard" class="current-weather-card">
            <div class="loading">Initializing...</div>
        </div>

        <div id="forecastGrid" class="forecast-grid">
            <div class="loading">Checking login status...</div>
        </div>
    </div>

    <div id="guestContent" class="guest-content">
        <div class="info-section">
            <h2>Get Started</h2>
            <p>Login with your email to get weather for your current location and save your favorite locations.</p>
            <button id="getStartedBtn" class="btn btn-primary">Get Started</button>
        </div>
    </div>

    <div id="userContent" class="user-content" style="display: none;">
        <div class="locations-section">
            <h2>Saved Locations</h2>
            <div id="locationsList" class="locations-list">
            </div>
            <button id="showAddLocationBtn" class="btn btn-primary">Save New Location</button>
        </div>
    </div>
</div>

<div id="addLocationModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add New Location</h2>
            <span class="close" id="closeAddLocationModal">&times;</span>
        </div>
        
        <div class="modal-body">
            <div class="input-group">
                <label for="locationInput">Search for a location:</label>
                <div class="search-input-container">
                    <input 
                        type="text" 
                        id="locationInput" 
                        placeholder="Enter city, state, or country..."
                        autocomplete="off"
                    >
                    <button id="searchLocationBtn" class="btn btn-primary">Search</button>
                </div>
            </div>
            
            <div id="locationPreview" class="location-preview" style="display: none;">
            </div>
            
            <div id="customNameSection" class="input-group" style="display: none;">
                <label for="customNameInput">Custom name (optional):</label>
                <input 
                    type="text" 
                    id="customNameInput" 
                    placeholder="e.g., Home, Work, Mom's House..."
                    autocomplete="off"
                >
                <small class="input-help">
                    Leave blank to use the location's default name
                </small>
            </div>
            
            <div id="locationConfirmText" class="confirm-text" style="display: none;">
            </div>
        </div>
        
        <div class="modal-footer">
            <div id="confirmActions" class="modal-actions" style="display: none;">
                <button id="cancelAddLocation" class="btn btn-secondary">Cancel</button>
                <button id="confirmAddLocation" class="btn btn-primary">Save Location</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}